<!DOCTYPE html>
<!-- html5_006 : WTE micro template -->

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hello world netlify</title>

	<link rel="stylesheet" type="text/css" href="https://rawgit.com/Offirmo/offirmo-monorepo/master/2-advanced/view-css/dist/offirmo-reset%2Butils.css" />

	<style type="text/css">

	</style>

	<script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>

<!-- Add a menu:
   Log in / Sign up - when the user is not logged in
   Username / Log out - when the user is logged in
  -->
<div data-netlify-identity-menu></div>

<!-- Add a simpler button:
  Simple button that will open the modal.
-->
<div data-netlify-identity-button>Login with Netlify Identity</div>


<p>Hello world + Identity + Serverless, freely hosted by Netlify.</p>
<ul>
	<li>Src: <a>https://github.com/Offirmo/hello-world-netlify-identity</a>
	<li>Using: <a>https://github.com/netlify/netlify-lambda</a>
	<button onclick="netlifyIdentity.open()">auth</button>
</ul>

<script>
	(document.querySelector('h1') || {}).textContent = document.title;
	Array.prototype.forEach.call(document.querySelectorAll('a'), function (el) {
		el.href || (el.href = el.text);
	});

	// Bind to events
	netlifyIdentity.on("init", user => console.log(user));
	netlifyIdentity.on("login", user => console.log(user));
	netlifyIdentity.on("logout", () => console.log("Logged out"));
	netlifyIdentity.on("error", err => console.error("Logged out", err));
	netlifyIdentity.on("open", () => console.log("Widget opened"));
	netlifyIdentity.on("close", () => console.log("Widget closed"));

	// Open the modal
	//netlifyIdentity.open();

	// Get the current user:
	//const user = netlifyIdentity.currentUser();

	// Close the modal
	//netlifyIdentity.close();

	// Log out the user
	//netlifyIdentity.logout();

</script>
